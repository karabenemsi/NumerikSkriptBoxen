\documentclass[13pt]{scrreprt}
\usepackage[ngerman]{babel}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage[utf8x]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{geometry}
\usepackage{environ}
\usepackage{enumitem}
\usepackage[many]{tcolorbox}
\usepackage{xcolor}


% Title Page
\title{Numerik Boxen}
\author{Florian Lubitz \& Steffen Hecht}

\newcounter{BoxCounter}
\setcounter{BoxCounter}{0}


\newtcolorbox{dbox}[1][]{%
	enhanced,frame hidden,interior hidden,
	arc=0pt,outer arc=0pt,borderline={0.4pt}{0pt}{dashed},
	nobeforeafter, box align=center, before={\stepcounter{BoxCounter}\boxed{\arabic{BoxCounter}}\makebox[.5cm]{}}, after={\vspace{0.5cm}}
}

\NewEnviron{tbox}{%
	\begin{dbox}
		\BODY
	\end{dbox}
}
\NewEnviron{abox}{%
	\begin{dbox}
		\begin{align*}
		\BODY
		\end{align*}
	\end{dbox}
}
\makeatletter
\newcommand\numbereq{%
	\ifmeasuring@
	\else
		\refstepcounter{equation}%
	\fi
	\tag{\theequation}%
}


\newcommand*{\rom}[1]{\expandafter\@slowromancap\romannumeral #1@}
\makeatother

\begin{document}

\maketitle

\chapter{1}

\begin{dbox}
\end{dbox}

\begin{tbox}
	Die \underline{Gleitpunktzahlendarstellung} zerlegt jede reelle Zahl $r \in \mathbb{R}$ in drei Bestandteile:\\
	\begin{enumerate}[label=\Roman*)]
		\item ein Vorzeichen $ (-1)^v$ mit $v \in \{0, 1\}$
		\item eine Mantisse $m \in \mathbb{R}$ und
		\item einen Exponenten $e \in \mathbb{Z}$, sodass
	\end{enumerate}
	\begin{equation}
	r = (-1)^v \cdot m \cdot 2^e
	\end{equation}
\end{tbox}

\begin{tbox}
	\begin{equation}
	r = (-1)^v \cdot \sum_{i = 0}^{t - 1} r_i \cdot 2^{-i} \text{ mit } r_0 = 1 \text{ (sodass } 1 \le m \le 2\text{)}
	\end{equation}
\end{tbox}

\begin{tbox}
	\begin{align*}
	13,6 &= 2^3 + 5,6\\
	&= 2^3 + 2^2 + 1,6\\
	&= ...\\
	&= 2^3 + 2^2 + 2^0 + 2^{-1} + 2^{-4} + 0,0375\\
	&= ...
	\end{align*}
	Also können wir die Dezimalzahl $(13,6)_{10}$ als Binärzahl $(1101,1001...)_2$ darstellen.
\end{tbox}

\begin{tbox}
	\begin{align*}
	(13,6)_{10} &= (1101,1001...)_2\\
	&= (-1)^0 \cdot (1,1011001...)_2 \cdot 2^3
	\end{align*}
	also $v = 0$, $m = (1,1011001...)_2$ und $e = 3$
\end{tbox}

\begin{tbox}
	Eine reelle Zahl $r \in \mathbb{R}$ mit der Darstellung\\
	\begin{equation}
	r = (-1)^v \cdot \sum_{i = 0}^{t - 1} r_i \cdot 2^{-i} \cdot 2^e \text{ mit } r_0 = 0
	\end{equation}
	gehört der Menge der nicht-normierten oder subnormalen Gleitpunktzahlen $\mathbb{M}_s$ an.
\end{tbox}

\begin{tbox}
	Es gilt analog zu Definition 1.2: Das Vorzeichen $(-1)^v$ wird durch das Vorzeichen-Bit $v \in \{0, 1\}$, der Wert der Mantisse $m$ durch die Ziffern $r_i \in \{0, 1\}$, $i = 1,..., t - 1$ und der Wert des Exponenten durch eine ganze Zahl $e \in \mathbb{Z}$ mit $e = e_{min}$ festgelegt.
\end{tbox}

\begin{abox}
	0 = (-1)^v \cdot 0 \cdot 2^{e_{min}} \numbereq
\end{abox}

\setcounter{BoxCounter}{10}

\begin{abox}
v + 134 = 16
\end{abox}
	
\begin{abox}
f_{rd}(r):= \delta_{r}:=rd(r)-r
\end{abox}

\begin{abox}
f_{rel}:=\epsilon_{r}:= \frac{\delta_{r}}{r}=\frac{rd(r) -r}{r} \quad\text{ für }\quad r \ne 0
\end{abox}

\setcounter{BoxCounter}{15}
\begin{abox}
|\delta_{r}| \leqslant 2^{e-t} \qquad \text{und} \qquad  |\epsilon_{r}| \leqslant 2^{-t}
\end{abox}

\begin{abox}
\epsilon = 2^{-t}
\end{abox}

\begin{tbox}
...die entsprechenden Maschinenoperationen, d.h. die Anwendung der jeweiligen Operation auf Zahlen im normierten Gleitpunkzahlenformat nach Def. 1.2
\end{tbox}

\begin{tbox}
I) Verknüpfung der Maschinenzahlen mit höherer (ausreichend hoher) Genauigkeit\\
II) Runden des Ergebnisses auf eine Maschinenzahl
\end{tbox}

\begin{abox}
	r \circ _{\mathbb{M}}s := rd(r \circ s)
\end{abox}

\begin{tbox}
	\begin{align*}
	r + _{\mathbb{M}} s = (1,11)_2 \cdot 2^0 +_{\mathbb{M}} (1,10)_2 \cdot 2^2 &= (111)_2 \cdot 2^{-2} + (1,10)_2 \cdot 2^{-2}\\
	&= (1000,10)_2 \cdot 2^{-2}\\
	&= (100010)_2 \cdot 2^1\\
	&= (1,00)_2 \cdot 2^1 = (2)_{10}
	\end{align*}
	wohingegen das exakte Ergebnis $ r+s = \frac74 + \frac38 = \frac{17}{8}$ ist.\\
	Der absolute Rundengsfehler ist also
	\begin{align*}
	f_{rd} = (r+_{\mathbb{M}} s) - (r + s) = 2 -\frac{17}{8} = -\frac{1}{8}
	\end{align*}
	und der relative Rundungsfehler ist
	\begin{align*}
	|f_{rel}| &= |\frac{(1 +_{\mathbb{M}} s)-(r+s)}{r+s}|\\
	&= \frac{\frac18}{\frac{17}{8}}\\
	&= \frac{1}{17}\\
	&= 0,0588... \approx 5,88\%
\end{align*}
	Das ist relativ gut, denn der maximale Rundungsfehler bei einer 3-stelligen Mantisse ist
	$\epsilon =   2^{-3} = 12,5\%$.
\end{tbox}

\stepcounter{BoxCounter}

\begin{tbox}
	\begin{align*}
	r \circ_{\mathbb{M}} s = rd(r \circ s) = (r\circ s)\cdot(1 + \epsilon_0)
	\end{align*}
	wobei der relative Fehler $\epsilon_0$ der Gleitpunktoperation wegen Def. 1.10 stets durh die Maschinengenauigkeit beschränkt ist,
	\begin{align*}
	\epsilon_0 := \frac{(r\circ_{\mathbb{M}} s)-(r \circ s)}{r \circ s} = \frac{rd(r \circ s) - (r \circ s)}{r \circ s} \leqslant \epsilon
	\end{align*}
\end{tbox}

\begin{abox}
		\tilde{y} =& \tilde{x} +_{\mathbb{M}} c \\
		&= (\tilde{x} + c) \cdot (1+ \epsilon_2)\\
		&= ((a +_{\mathbb{M}} b) + c) \cdot (1+ \epsilon_2)\\
		&= ((a + b) \cdot (1+ \epsilon_1) + c) \cdot (1+ \epsilon_2)\\
		&= a + b + c + (a+b)\cdot\epsilon_1 + (a + b +c)\cdot\epsilon_2 + (a+b)\cdot\epsilon_1\epsilon_2
\end{abox}

\begin{abox}
	\tilde{y} \overset{\cdot}{=}  a + b + c + (a+b)\cdot\epsilon_1 + (a + b +c)\cdot\epsilon_2
\end{abox}

\begin{abox}
	f_{rel}(y) = \frac{\tilde{y} - y}{y} &= \frac{(a+b)\cdot\epsilon_1 + (a + b +c)\cdot\epsilon_2}{a + b + c}\\
	&= \frac{a+b}{a+b+c}\cdot\epsilon_1 + \epsilon_2
\end{abox}

\begin{abox}
	|f_{rel}(y)| &= |\frac{a+b}{a+b+c}\cdot\epsilon_1 + \epsilon_2|\\ &\overset{(D.U.G)}{\leqslant} |\frac{a+b}{a+b+c}|\cdot|\epsilon_1| + |\epsilon_2|
\end{abox}

\begin{abox}
	|f_{rel}(y)| \leqslant (1+ | \frac{a+b}{a+b+c}|) \cdot \epsilon = (a+ \frac{1}{|1 + \frac{c}{a+b}|}) \cdot \epsilon
\end{abox}

\begin{tbox}
	\begin{align*}
	c \approx -(a+b)
	\end{align*}
	ist. Denn für $c \rightarrow -(a+b)$ ist $ \frac{|a+b|}{|a+b+c|} \rightarrow \infty$ und damit wird auch die obere Schranke von $|f_{rel}(y)|$ beliebig (unendlich) groß. In diesem Fall spricht man von \textbf{Auslöschung}
\end{tbox}


30-36

\setcounter{BoxCounter}{36}
\setcounter{equation}{11}

\begin{tbox}
	\begin{align*}
	y + \delta_{y} = f(x + \delta_{x}) &= f(x) + f'(x)\delta_{x} + O(\delta_{x}^2)
	\end{align*}
	Unter Vernachlässigung der Terme höherer Ordnung gilt also:
	\begin{align*}
	\delta_{y} \overset{\cdot}{=} f'(x) \cdot \delta_{x}
	\end{align*}
	Die Verstärkung des relativen Rundungsfehlers $\epsilon_y$ des Resultats $y$ ergibt sich dann für $x,y \ne 0$:
	\begin{align*}
	\epsilon_y = f_{rel}(y) = \frac{\delta_{y}}{y} \overset{\cdot}{=} \frac{f'(x)\cdot \delta_{x}}{y} = \frac{x \dot f'(x)}{y} \cdot \frac{\delta_{x}}{x} = \frac{x \cdot f'(x)}{y} \cdot \epsilon_x \numbereq
	\end{align*}
	aus dem relativen Rundungsfehler $\epsilon_{x}$ der Eingabe $x$.
\end{tbox}

\begin{tbox}
	... aus dem Verstärkungsfaktor
	\begin{align*}
		K_f(x) := |\frac{x \cdot f'(x)}{f(x)}|
	\end{align*}
	zwschen den relativen Rundungsfehlern aus (1.12)
\end{tbox}

\chapter{Lineare Gleichungssysteme}

\begin{abox}
\end{abox}
\setcounter{BoxCounter}{39}

\begin{tbox}
\begin{align*}
10 x_1 + 7x_2 + 0x_3 &= 7\\
2,5x_2 + 5x_3 &= 2,5\\
6,2x_3 &= 6,2
\end{align*}
... oder in Matrixschreibweise:
\begin{align*}
\begin{pmatrix}
10 & -7 & 0\\
0 & 2,5 & 5\\
0 & 0 & 6,2
\end{pmatrix} \cdot \begin{pmatrix}
x_1 \\ x_2 \\ x_3
\end{pmatrix} = \begin{pmatrix}
7 \\ 2,5 \\ 6,2
\end{pmatrix}
\end{align*}
\end{tbox}

\begin{tbox}
	\begin{align*}
x_3 &= \frac{6,2}{6,2} = 1 \\
x_2 &= \frac{2,5-5x_3}{2,5} = \frac{2,4-5\cdot1}{2,5} = -1\\
x_1 &=  \frac{7-0x_2+7x_2}{10} = \frac{7-0-7}{10} = 0
\end{align*}
Somit resultiert der Lösungsvektor $\begin{pmatrix}
x_1\\x_2\\x_3
\end{pmatrix} = \begin{pmatrix}0\\-1\\1\end{pmatrix}$
\end{tbox}

\begin{tbox}
 \begin{enumerate}[label=\Roman*)]
 \item Berechnung $x_n = \frac{b_n}{a_nn}$
 \item Schrittweise Berechnung :\\
 	Für $i = n-1, n-2, ... , 3,2,1$ ist $x_i= \frac{b_i - \sum_{j=i+1}^{n}a_{ij} \cdot x_j}{a_{ii}}$
 \end{enumerate}
\end{tbox}

\begin{abox}
	\begin{pmatrix}
		a_{11}& a_{12} & a{1n} \\
a_{21}& a_{22} & a{2n} \\
\vdots \\
a_{n1} & a_{n2} & a_{nn}
	\end{pmatrix}
 \cdot \begin{pmatrix}
 	x_1 \\ x_2\\ \vdots \\ x_n \end{pmatrix}
  = \begin{pmatrix}
  	b_1 \\ b_2 \\ \vdots\\ b_n
  \end{pmatrix}
\end{abox}

\begin{abox}
	\begin{pmatrix}
		10 & -7 & 0\\
		-3 & 2 & 6\\
		5 & -1 & 5
	\end{pmatrix}
\cdot \begin{pmatrix}
	x_1 \\x_2 \\ x_3
\end{pmatrix} = \begin{pmatrix}
7 \\ 4 \\ 6
\end{pmatrix}
\end{abox}

\begin{abox}
	\begin{pmatrix}
	10 & -7 & 0\\
	0 & -0.1 & 6\\
	5 & -1 & 5
\end{pmatrix}
\cdot 
\begin{pmatrix}
	x_1 \\x_2 \\ x_3
\end{pmatrix} =
\begin{pmatrix}
7 \\ 6,1 \\ 6
\end{pmatrix}
\end{abox}

\begin{abox}
	\begin{pmatrix}
		10 & -7 & 0\\
		0 & -0.1 & 6\\
		0 & 2,5 & 5
	\end{pmatrix}
	\cdot 
	\begin{pmatrix}
		x_1 \\x_2 \\ x_3
	\end{pmatrix} =
	\begin{pmatrix}
		7 \\ 6,1 \\ 2,5
	\end{pmatrix}
\end{abox}

\begin{abox}
	\begin{pmatrix}
		10 & -7 & 0\\
		0 & -0.1 & 6\\
		0 & 0 & 155
	\end{pmatrix}
	\cdot 
	\begin{pmatrix}
		x_1 \\x_2 \\ x_3
	\end{pmatrix} =
	\begin{pmatrix}
		7 \\ 6,1 \\ 155
	\end{pmatrix}
\end{abox}

\begin{abox}
	x_3 &= \frac{155}{155} = 1\\
	x_2 &= \frac{6,1 - 6 \cdot 1}{-0,1} = -1\\
	x_1 &= \frac{7-(-7)\cdot(-1)-0\cdot1}{10} = 0
\end{abox}

\begin{abox}
	\begin{pmatrix}
		10 &-7 & 0\\
		0 & 0 & 6\\
		0 & 2,5 & 5
	\end{pmatrix} \cdot
\begin{pmatrix}
	x_1\\x_2\\x_3
\end{pmatrix} = \begin{pmatrix}
7 \\ 6,1 \\ 2,5
\end{pmatrix}
\end{abox}

\begin{abox}
	\begin{pmatrix}
		10 &-7 & 0\\
		0 & 2,5 & 5\\
				0 & -0,1 & 6
	\end{pmatrix} \cdot
	\begin{pmatrix}
		x_1\\x_2\\x_3
	\end{pmatrix} = \begin{pmatrix}
		7 \\ 2,5 \\ 6,1
	\end{pmatrix}
\end{abox}

\begin{abox}
	\begin{pmatrix}
		10 &-7 & 0\\
		0 & 2,5 & 5\\
		0 & 0 & 6,2
	\end{pmatrix} \cdot
	\begin{pmatrix}
		x_1\\x_2\\x_3
	\end{pmatrix} = \begin{pmatrix}
		7 \\ 2,5 \\ 6,2
	\end{pmatrix}
\end{abox}

\begin{tbox}
	Für eine $k \times n$ Matrix A und eine $n \times m$ Matrix B
	
	\begin{align*}
	A =
	\begin{pmatrix}
	a_{11} & \dots & a_{1n}\\
	\vdots & & \vdots \\
	a_{k1}  & \dots & a_{kn}
	\end{pmatrix}
	\text{ und } B = \begin{pmatrix}
		b_{11} & \dots & b_{1m}\\
		\vdots & & \vdots \\
		b_{n1}  & \dots & b_{bm}
	\end{pmatrix}
		\end{align*}
		
		ergibt sich das \underline{Matrixprodukt} $A \cdot B$ durch die $k \times m$ Matrix
		
		\begin{align*}
			A \cdot B = \begin{pmatrix}
			\sum_{j=1}^{n}a_{1j}\cdot b_{j1} & \dots & \sum_{j=1}^{n}a_{1j}\cdot b_{jm} \\
			\vdots & & \vdots \\
			\sum_{j=1}^{n}a_{kj}\cdot b_{j1} & \dots & \sum_{j=1}^{n}a_{kj}\cdot b_{jm}
			\end{pmatrix}
		\end{align*}
\end{tbox}

\begin{abox}
	(AB)_{rs} = \sum_{j=1}^{n} a_{rj}b_{js}
\end{abox}

\begin{abox}
	A \cdot (B \cdot C) &= (A \cdot B) \cdot C\\
	A\cdot (B + C) &= A \cdot B + A \cdot C
\end{abox}

\begin{abox}
	C = x^T \cdot y = (x_1, ... , x_n) \cdot \begin{pmatrix}
		y_1 \\ \vdots \\ y_n
	\end{pmatrix} = 
\sum_{j=1}^{n} x_j \cdot y_j \quad \in \mathbb{R}
\end{abox}



\end{document}          
